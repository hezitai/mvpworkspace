(function(e){function t(t){for(var i,r,o=t[0],l=t[1],c=t[2],d=0,h=[];d<o.length;d++)r=o[d],Object.prototype.hasOwnProperty.call(s,r)&&s[r]&&h.push(s[r][0]),s[r]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);m&&m(t);while(h.length)h.shift()();return n.push.apply(n,c||[]),a()}function a(){for(var e,t=0;t<n.length;t++){for(var a=n[t],i=!0,o=1;o<a.length;o++){var l=a[o];0!==s[l]&&(i=!1)}i&&(n.splice(t--,1),e=r(r.s=a[0]))}return e}var i={},s={app:0},n=[];function r(t){if(i[t])return i[t].exports;var a=i[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=i,r.d=function(e,t,a){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},r.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(r.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)r.d(a,i,function(t){return e[t]}.bind(null,i));return a},r.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=t,o=o.slice();for(var c=0;c<o.length;c++)t(o[c]);var m=l;n.push([0,"chunk-vendors"]),a()})({0:function(e,t,a){e.exports=a("56d7")},"034f":function(e,t,a){"use strict";var i=a("85ec"),s=a.n(i);s.a},"377a":function(e,t,a){"use strict";var i=a("ab11"),s=a.n(i);s.a},"56d7":function(e,t,a){"use strict";a.r(t);a("e260"),a("e6cf"),a("cca6"),a("a79d");var i=a("2b0e"),s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"app"}},[a("transition",{attrs:{name:"","enter-active-class":"animate__animated animate__fadeInLeft","leave-active-class":"animate__animated animate__fadeOutLeft"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:!e.drawer,expression:"!drawer"}],staticClass:"show-drawer",on:{click:e.showDrawer}},[a("span",[a("i",{staticClass:"el-icon-right"})])])]),a("el-drawer",{attrs:{visible:e.drawer,modal:!1,size:"300px",direction:"ltr","with-header":!1},on:{"update:visible":function(t){e.drawer=t}}},[a("div",{staticClass:"insideDrawerContent"},[a("p",{on:{click:function(t){return e.showContent("mission")}}},[e._v("任务内容显示")]),a("p",{on:{click:function(t){return e.showContent("winch")}}},[e._v("绞车信息显示")]),a("p",{on:{click:function(t){return e.showContent("apparatus")}}},[e._v("仪器数据显示")])]),a("div",{staticClass:"form-area"},[a("p",{staticClass:"alert-title"},[e._v("报警信息")]),a("div",{staticClass:"alert-content"},[a("div",{staticClass:"empty"}),e._l(e.alertArray,(function(t,i){return a("div",{key:i,staticStyle:{"padding-bottom":"20px"}},[a("span",[e._v("("+e._s(i+1)+") "+e._s(t.timeTag))]),a("br"),a("span",[e._v(e._s(t.dptName))]),a("br"),a("span",[e._v(e._s(t.alarmDescription))])])}))],2)])]),a("Mission",{on:{sendEleName:e.getMsg}}),a("div",{staticClass:"btm-content"},[a("Winch",{attrs:{pageSize:e.pageSize},on:{sendEleName:e.getMsg,contrlEleName:e.getContrlEle}}),a("Apparatus",{attrs:{pageSize:e.pageSize},on:{sendEleName:e.getMsg,contrlEleName:e.getContrlEle}})],1)],1)},n=[],r=(a("c975"),a("a434"),a("96cf"),a("1da1")),o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"winch"}},[a("p",{staticClass:"page-title"},[a("span",{directives:[{name:"show",rawName:"v-show",value:0==e.pageSize,expression:"pageSize == false"}],staticStyle:{display:"inline-block","margin-left":"60px"}},e._l(e.legendArray,(function(t,i){return a("span",{key:i,staticClass:"legend-item"},[a("span",{staticClass:"legend-point",style:{background:t.color},on:{click:function(a){return e.showLine(t.id)}}},[a("span",{staticClass:"legend-point-line",style:{background:t.color}})]),a("span",{staticClass:"legend-title",on:{click:function(a){return e.showYAxisAndWeightLine(t)}}},[e._v(e._s(t.name))])])})),0),a("span",{staticClass:"close-btn",staticStyle:{right:"20px"},attrs:{title:"放大/缩小"},on:{click:function(t){return e.handleSize("winch")}}},[a("i",{class:e.iconName})]),a("span",{staticClass:"close-btn",on:{click:function(t){return e.closeItem("winch")}}},[a("i",{staticClass:"el-icon-circle-close"})])]),a("div",{staticClass:"winch-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.pageSize,expression:"pageSize == true"}]},[a("div",{staticClass:"input-area-1"},[a("div",{staticClass:"top-input-1"},[a("div",{staticClass:"form-label"},[a("p",[e._v("数据时间")]),a("span",{staticClass:"form-label-res",staticStyle:{"max-width":"200px"}},[e._v(" "+e._s(e.form.getDataTime)+" ")])])]),a("div",{staticClass:"grid-content"},[a("div",{staticStyle:{width:"100%",height:"84px"}}),e._l(e.formArray,(function(t,i){return a("div",{key:i,staticClass:"form-label",attrs:{label:t.dataName+"("+t.dataUnit+")"}},[a("p",[e._v(e._s(t.dataName)+" "),null!=t.dataUnit?a("span",[e._v("("+e._s(t.dataUnit)+")")]):e._e()]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e._f("formatterDecimals")(t.vals))+" ")])])}))],2)])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.pageSize,expression:"pageSize == false"}],staticStyle:{height:"100%",overflow:"hidden"}},[a("div",{staticClass:"bigScreen"},[a("div",{staticClass:"leftScreen"},[a("div",{staticClass:"leftScreen-inside"},[a("div",{style:{width:"100%"},attrs:{id:"myChart1"}}),a("div",{staticClass:"checkbox-content"},[a("el-collapse",{model:{value:e.activeNames,callback:function(t){e.activeNames=t},expression:"activeNames"}},e._l(e.checkboxarray,(function(t,i){return a("el-collapse-item",{key:i,staticClass:"checkbox-group",attrs:{title:t.name,name:i+1}},e._l(t.arr,(function(t,i){return a("el-checkbox",{key:i,attrs:{disabled:"",label:t.dataValue,name:t.dataValue},model:{value:t.checked,callback:function(a){e.$set(t,"checked",a)},expression:"it.checked"}},[e._v(e._s(t.dataDescription))])})),1)})),1)],1)])]),a("div",{staticClass:"input-area-box"},[a("div",{staticClass:"top-input"},[a("div",{staticClass:"form-label-top"},[a("p",[e._v("数据时间")]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e.form.getDataTime)+" ")])])]),a("div",{staticClass:"input-area"},[a("div",{staticClass:"from-content"},e._l(e.formArray,(function(t,i){return a("div",{key:i,staticClass:"form-label",attrs:{label:t.dataName+"("+t.dataUnit+")"}},[a("p",[e._v(e._s(t.dataName)+" "),null!=t.dataUnit?a("span",[e._v("("+e._s(t.dataUnit)+")")]):e._e()]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e._f("formatterDecimals")(t.vals))+" ")])])})),0)])])])])])])},l=[],c=(a("b0c0"),a("b680"),a("ac1f"),a("5319"),a("d3b7"),a("bc3a")),m=a.n(c);function d(e){return m()(e).then((function(e){return e})).catch((function(e){return Promise.reject(e)}))}m.a.defaults.timeout=2e4,"production"!==Object({NODE_ENV:"production",BASE_URL:""})&&(m.a.defaults.baseURL=localStorage.getItem("mvpip")+"/api/"),Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_FLAG,Object({NODE_ENV:"production",BASE_URL:""}).VUE_APP_FLAG,m.a.defaults.headers.post["Content-Type"]="application/json";var h=d,u={name:"winch",data:function(){return{activeNames:[1,2,3,4],readyRenderCheckboxData:!1,globelNum:0,formArray:[],chartsArray:[],isEnter:!1,echartsDataZoom:50,colorArray:["#0000FF","#DC143C","#800080","#5F9EA0","#FF8C00","#48D1CC","#696969","#006400","#8B4513","#FFD700"],legendArray:[],checkvalueArray:[],checkList:[3,5,6],checkList1:[6],checkList2:[3],userlevel:0,thisTimes:"",limit:1,form:{getDataTime:"0"},iconName:"el-icon-right",labelPosition:"top",sizeForm:{ropeLengthMet:"",pullRopeSpeed:"",type:[1,4],collectSpeed:"",ropeBar:"",fuelTmp:"",handleImport:"",proportionalExport:"",brakeBar:""},checkboxarray:[{arr:[]}],myChart1:"",option:{title:{text:""},tooltip:{trigger:"axis"},color:["#0000FF","#DC143C","#800080","#5F9EA0","#FF8C00","#48D1CC","#696969","#006400","#8B4513","#FFD700"],grid:{left:"5%",right:"5%",bottom:"5%",containLabel:!1},dataZoom:[{type:"inside"}],xAxis:{type:"category",boundaryGap:!1,data:[],axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:[],series:[]}}},watch:{pageSize:function(e,t){this.iconName=1==e?"el-icon-right":"el-icon-back"}},filters:{formatterDecimals:function(e){return null==e||0==e?0:"string"==typeof e?e:e.toFixed(4)}},props:{pageSize:Boolean},beforeMount:function(){},mounted:function(){this.getStatusDefine(),this.getwshow(),document.getElementsByClassName("input-area")[0].style.height=document.getElementById("winch").clientHeight-50+"px",document.getElementsByClassName("input-area-1")[0].style.height=document.getElementById("winch").clientHeight-50+"px";var e=this;window.onresize=function(){e.myChart1.resize()},this.getDataSec()},methods:{closeItem:function(e){this.$emit("sendEleName",e)},handleSize:function(e){1==this.pageSize?this.pageSize=!1:this.pageSize=!0,this.$emit("contrlEleName",{ele:e,switch:this.pageSize})},showYAxisAndWeightLine:function(e){var t=this,a=t.myChart1.getOption();for(var i in a.yAxis)if(a.yAxis[i].show=!1,a.yAxis[i].id==e.id)if(null==e.sameAs)a.yAxis[i].show=!0,a.series[i].lineStyle.width=4;else for(var s in a.yAxis)e.sameAs==a.yAxis[s].id&&(a.yAxis[s].show=!0,a.series[i].lineStyle.width=4);t.myChart1.setOption(a)},showLine:function(e){var t=this,a=t.myChart1.getOption();for(var i in a.yAxis)a.series[i].id==e&&(0==a.series[i].lineStyle.width?a.series[i].lineStyle.width=2:a.series[i].lineStyle.width=0);t.myChart1.setOption(a)},formatterTimes:function(e,t){var a=e;a=a.substring(0,19),a=a.replace(/-/g,"/");var i=new Date(a).getTime();i=0==t?i:i+=1e3*t;var s=new Date(i),n=s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-"+(s.getDate()<10?"0"+s.getDate():s.getDate())+" "+(s.getHours()<10?"0"+s.getHours():s.getHours())+":"+(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":"+(s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds());return n},getDataSec:function(){var e=this;window.clearInterval(e.setInterval),e.setInterval=setInterval((function(){e.getWinchData({thisTimes:e.thisTimes,limit:e.limit})}),1e3)},renderEcharts:function(e,t){var a=this;if(a.myChart1){var i=a.myChart1.getOption(),s=e.data;for(var n in s.length>1&&s.reverse(),s){if(1==t)for(var r=0;r<a.echartsDataZoom;r++)i.xAxis[0].data.push(a.formatterTimes(s[n].timeTag,r));-1==i.xAxis[0].data.indexOf(s[n].timeTag)&&i.xAxis[0].data.push(s[n].timeTag);var o=s[n],l=i.series;for(var c in l)for(var m in o)l[c].labelName==m&&l[c].data.push(o[m]);i.xAxis[0].data.length>a.echartsDataZoom&&i.xAxis[0].data.splice(0,i.xAxis[0].data.length-a.echartsDataZoom);for(var d=0;d<i.series.length;d++)i.series[d].data.length>a.echartsDataZoom&&i.series[d].data.splice(0,i.series[d].data.length-a.echartsDataZoom)}a.myChart1.setOption(i)}},getWinchData:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,o,l,c,m,d,u,p,g;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,a.next=3,h({url:"winch/get_realdata",method:"get",params:{start_time:e.thisTimes,limit:e.limit}});case 3:s=a.sent;try{if(s.data.length>0){for(o in n=JSON.parse(JSON.stringify(s)),r=JSON.parse(JSON.stringify(s)),n.data[0])"number"==typeof n.data[0][o]&&(n.data[0][o]=null==n.data[0][o]?0:n.data[0][o].toFixed(2));for(c in 0==i.globelNum?i.renderEcharts(n,!0):i.renderEcharts(n,!1),i.globelNum+=1,i.form={getDataTime:s.data[0].timeTag},i.thisTimes=s.data[0].timeTag,l=s.data[0],i.formArray)for(m in l)i.formArray[c].fieldName==m&&(i.formArray[c].vals=l[m]);for(d in r.data[0])for(u in i.checkboxarray)d==i.checkboxarray[u].fieldName&&(i.checkboxarray[u].value=r.data[0][d]);for(p=0;p<i.checkboxarray.length;p++)for(g=0;g<i.checkboxarray[p].arr.length;g++)(i.checkboxarray[p].value&i.checkboxarray[p].arr[g].dataValue)>0&&(i.checkboxarray[p].arr[g].checked=!0)}}catch(f){console.log(f)}case 5:case"end":return a.stop()}}),a)})))()},getwshow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s,n,r,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"sys-define/get_wshow_define",method:"get"});case 3:i=t.sent;try{if(console.log(i.data),a.formArray=JSON.parse(JSON.stringify(i.data)),a.formArray.length>0){for(s in a.formArray)1==a.formArray[s].showInChart&&a.chartsArray.push(a.formArray[s]);for(n in a.chartsArray)a.option.series.push({id:a.chartsArray[n].serialNo,name:a.chartsArray[n].dataName,type:"line",yAxisIndex:n,symbol:"none",smooth:!0,data:[],labelName:a.chartsArray[n].fieldName,sameAs:a.chartsArray[n].sameAs}),a.option.yAxis.push({id:a.chartsArray[n].serialNo,name:a.chartsArray[n].dataName,position:"left",type:"value",show:0==n,inverse:1==a.chartsArray[n].topLeft,axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!0},nameLocation:1==a.chartsArray[n].topLeft?"start":"end",min:null==a.chartsArray[n].lowerLimit?"dataMin":a.chartsArray[n].lowerLimit,max:null==a.chartsArray[n].upperLimit?"dataMax":a.chartsArray[n].upperLimit}),a.legendArray.push({color:"",name:a.chartsArray[n].dataName+"("+a.chartsArray[n].dataUnit+")",id:a.chartsArray[n].serialNo,sameAs:a.chartsArray[n].sameAs});for(r in a.option.yAxis)for(o in a.option.series)a.option.series[o].sameAs==a.option.yAxis[r].id&&(a.option.series[o].yAxisIndex=r);for(l in a.colorArray)for(c in a.legendArray)a.legendArray[c].color=a.colorArray[c];a.drawLine()}}catch(m){console.log(m)}case 5:case"end":return t.stop()}}),t)})))()},drawLine:function(){var e=this,t=this;this.myChart1=this.$echarts.init(document.getElementById("myChart1")),this.myChart1.getZr().on("mousemove",(function(a){var i=[a.offsetX,a.offsetY];if(e.myChart1.containPixel("grid",i)){if(1==t.isEnter)return;t.isEnter=!0,window.clearInterval(t.setInterval)}})),this.myChart1.getZr().on("mouseout",(function(e){t.isEnter=!1,window.clearInterval(t.setInterval),t.setInterval=setInterval((function(){t.getWinchData({thisTimes:t.thisTimes,limit:""})}),1e3)})),this.myChart1.setOption(this.option,!0);var i=a("eec4"),s=i(),n=document.getElementsByClassName("winch-content")[0];s.listenTo(n,(function(e){t.$nextTick((function(){document.getElementById("myChart1").style.width="100%",t.myChart1.resize()}))})),s.listenTo(n,(function(e){t.$nextTick((function(){document.getElementsByClassName("input-area")[0].style.height=e.clientHeight+"px",document.getElementsByClassName("input-area-1")[0].style.height=e.clientHeight+"px",document.getElementById("myChart1").style.height=e.clientHeight-document.getElementsByClassName("checkbox-content")[0].clientHeight+"px",document.getElementById("myChart1").clientHeight>500?document.getElementById("myChart1").style.height=e.clientHeight-document.getElementsByClassName("checkbox-content")[0].clientHeight+"px":document.getElementById("myChart1").style.height=e.clientHeight-49*t.checkboxarray.length+"px",t.myChart1.resize()}))}))},getStatusDefine:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s,n,r,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"winch/get_status_define",method:"get"});case 3:i=t.sent;try{for(n in a.checkboxarray=[],s=[],i.data)-1==s.indexOf(i.data[n].fieldName)&&s.push(i.data[n].fieldName);for(r=0;r<s.length;r++)o={name:"",fieldName:"",value:0,arr:[]},a.checkboxarray.push(o);for(l=0;l<s.length;l++)for(c=0;c<i.data.length;c++)s[l]==i.data[c].fieldName&&(i.data[c].checked=!1,""==a.checkboxarray[l].name&&(a.checkboxarray[l].name=i.data[c].fieldName+" System"),""==a.checkboxarray[l].fieldName&&(a.checkboxarray[l].fieldName=i.data[c].fieldName),a.checkboxarray[l].arr.push(i.data[c]));a.readyRenderCheckboxData=!0}catch(m){console.log(m)}case 5:case"end":return t.stop()}}),t)})))()}}},p=u,g=(a("f8dd"),a("2877")),f=Object(g["a"])(p,o,l,!1,null,"f2c64848",null),y=f.exports,v=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"mission"}},[a("div",{staticClass:"mission-box"},[a("p",{staticClass:"page-title"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.isMaxScreen,expression:"isMaxScreen == true"}]},[e._v("任务内容显示")]),a("span",{staticClass:"close-btn",staticStyle:{right:"26px"},attrs:{title:"放大/缩小"},on:{click:function(t){return e.handleSize("mission")}}},[a("i",{class:e.iconName})]),a("span",{staticClass:"close-btn",on:{click:e.closeItem}},[a("i",{staticClass:"el-icon-close"})])]),a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.isMaxScreen,expression:"isMaxScreen == true"}],staticClass:"mission-content"},[a("el-form",{ref:"form",staticClass:"from-content",attrs:{model:e.form,inline:"",size:"mini"}},[a("el-form-item",{attrs:{label:"当前任务名称：","label-width":"120px"}},[a("el-input",{staticStyle:{width:"250px"},attrs:{disabled:""},model:{value:e.form.missionName,callback:function(t){e.$set(e.form,"missionName",t)},expression:"form.missionName"}})],1),a("br"),a("el-form-item",{attrs:{label:"当前任务模式：","label-width":"120px"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.missionType,callback:function(t){e.$set(e.form,"missionType",t)},expression:"form.missionType"}},[a("el-radio",{attrs:{label:5}},[e._v("定深投放")]),a("el-radio",{attrs:{label:80}},[e._v("距底定距离投放")])],1)],1),a("el-form-item",{attrs:{label:"当前任务状态：","label-width":"120px"}},[a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.missionStatus,callback:function(t){e.$set(e.form,"missionStatus",t)},expression:"form.missionStatus"}},[a("el-radio",{attrs:{label:3}},[e._v("等待执行")]),a("el-radio",{attrs:{label:48}},[e._v("正在执行")]),a("el-radio",{attrs:{label:51}},[e._v("投放间隔等待")]),a("el-radio",{attrs:{label:768}},[e._v("执行完成")]),a("el-radio",{attrs:{label:12288}},[e._v("已经取消")])],1)],1),a("br"),a("el-form-item",{attrs:{label:"每次投放间隔(秒)：","label-width":"145px"}},[a("el-input",{staticStyle:{width:"70px"},attrs:{disabled:""},model:{value:e.form.timesThrowSec,callback:function(t){e.$set(e.form,"timesThrowSec",t)},expression:"form.timesThrowSec"}})],1),a("el-form-item",{attrs:{label:"距底安全深度(米)：","label-width":"145px"}},[a("el-input",{staticStyle:{width:"72px"},attrs:{disabled:""},model:{value:e.form.securityDeepMet,callback:function(t){e.$set(e.form,"securityDeepMet",t)},expression:"form.securityDeepMet"}})],1),a("el-form-item",{attrs:{label:"设定深度(米)：","label-width":"120px"}},[a("el-input",{staticStyle:{width:"70px"},attrs:{disabled:""},model:{value:e.form.settingDepth,callback:function(t){e.$set(e.form,"settingDepth",t)},expression:"form.settingDepth"}})],1),a("el-form-item",{attrs:{label:"设定投放次数(次)：","label-width":"145px"}},[a("el-input",{staticStyle:{width:"65px"},attrs:{disabled:""},model:{value:e.form.settingThrowTimes,callback:function(t){e.$set(e.form,"settingThrowTimes",t)},expression:"form.settingThrowTimes"}})],1),a("el-form-item",{attrs:{label:"当前投放次数(次)：","label-width":"145px"}},[a("el-input",{staticStyle:{width:"65px"},attrs:{disabled:""},model:{value:e.form.thisSettingThrowTimes,callback:function(t){e.$set(e.form,"thisSettingThrowTimes",t)},expression:"form.thisSettingThrowTimes"}})],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.userlevel,expression:"userlevel == 0"}],staticClass:"btn-content"},[a("div",{staticClass:"left-btn-area"},[a("el-button",{attrs:{type:"danger",disabled:e.cancelBtn},on:{click:e.cancelMission}},[e._v("取消当前任务")]),a("el-button",{attrs:{type:"success",disabled:e.startBtn},on:{click:e.startingMission}},[e._v("开始执行任务")])],1),a("el-button",{staticClass:"create-btn",attrs:{type:"primary"},on:{click:e.createMission}},[e._v("增加任务")])],1)],1),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.isMaxScreen,expression:"isMaxScreen == false"}],staticClass:"minScreen"},[a("div",{staticClass:"form-content"},[a("span",{staticClass:"labelfont"},[e._v("当前任务状态：")]),a("el-radio-group",{attrs:{disabled:""},model:{value:e.form.missionStatus,callback:function(t){e.$set(e.form,"missionStatus",t)},expression:"form.missionStatus"}},[a("el-radio",{attrs:{label:3}},[e._v("等待执行")]),a("el-radio",{attrs:{label:48}},[e._v("正在执行")]),a("el-radio",{attrs:{label:51}},[e._v("投放间隔等待")]),a("el-radio",{attrs:{label:768}},[e._v("执行完成")]),a("el-radio",{attrs:{label:12288}},[e._v("已经取消")])],1)],1)])]),a("el-dialog",{attrs:{title:"新增任务",visible:e.dialogVisible,width:"600px","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("el-form",{ref:"dialogFrom",attrs:{model:e.dialogFrom,"label-width":"120px"}},[a("el-form-item",{attrs:{label:"新任务名称"}},[a("el-input",{model:{value:e.dialogFrom.missionName,callback:function(t){e.$set(e.dialogFrom,"missionName",t)},expression:"dialogFrom.missionName"}})],1),a("el-form-item",{attrs:{label:"任务工作模式"}},[a("el-radio-group",{model:{value:e.dialogFrom.missionType,callback:function(t){e.$set(e.dialogFrom,"missionType",t)},expression:"dialogFrom.missionType"}},[a("el-radio",{attrs:{label:5}},[e._v("定深投放")]),a("el-radio",{attrs:{label:80}},[e._v("距底定距投放")])],1)],1),a("el-form-item",{attrs:{label:"设定深度(米)"}},[a("el-input",{attrs:{type:"number"},model:{value:e.dialogFrom.settingDeep,callback:function(t){e.$set(e.dialogFrom,"settingDeep",t)},expression:"dialogFrom.settingDeep"}})],1),a("el-form-item",{attrs:{label:"设定投放次数(次)"}},[a("el-input",{directives:[{name:"show",rawName:"v-show",value:0==e.isMaxTimes,expression:"isMaxTimes==false"}],staticClass:"usedinput",staticStyle:{width:"90px","padding-right":"20px"},attrs:{type:"number"},model:{value:e.dialogFrom.settingTimes,callback:function(t){e.$set(e.dialogFrom,"settingTimes",t)},expression:"dialogFrom.settingTimes"}}),a("el-checkbox",{on:{change:e.isSettingTimes},model:{value:e.dialogFrom.checkbox,callback:function(t){e.$set(e.dialogFrom,"checkbox",t)},expression:"dialogFrom.checkbox"}},[e._v("无限次投放")])],1),a("el-form-item",{attrs:{type:"number",label:"每次投放间隔(秒)"}},[a("el-input",{model:{value:e.dialogFrom.settingInterval,callback:function(t){e.$set(e.dialogFrom,"settingInterval",t)},expression:"dialogFrom.settingInterval"}})],1),a("el-form-item",{attrs:{type:"number",label:"距底安全深度(米)"}},[a("el-input",{model:{value:e.dialogFrom.safeDepth,callback:function(t){e.$set(e.dialogFrom,"safeDepth",t)},expression:"dialogFrom.safeDepth"}})],1)],1)],1),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{staticStyle:{"margin-right":"20px"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:e.createMissionDialogBtn}},[e._v("确 定")])],1)])],1)},b=[],w=(a("a9e3"),{name:"mission",data:function(){return{iconName:"el-icon-top",isMaxScreen:!0,userlevel:0,options:[],startBtn:!1,cancelBtn:!1,dialogVisible:!1,labelPosition:"right",form:{missionName:"当前暂无任务",missionType:"",missionStatus:"",timesThrowSec:"",securityDeepMet:"",settingDepth:"",settingThrowTimes:"",thisSettingThrowTimes:""},dialogFrom:{missionName:"",missionType:5,settingDeep:"",settingTimes:"",settingInterval:"",safeDepth:"",checkbox:!1},isMaxTimes:!1,realTimeJobId:"",runningJob:[],hasRunningJob:!1,waitingJob:[],setinterval:"",setinterval1:""}},created:function(){this.userlevel=localStorage.getItem("mvplevel"),console.log(this.userlevel+"==>0:USE;1:READONLY;2PLAYBACK")},mounted:function(){this.getCurrentJob()},methods:{handleSize:function(e){"el-icon-top"==this.iconName?(this.iconName="el-icon-bottom",this.isMaxScreen=!1):(this.iconName="el-icon-top",this.isMaxScreen=!0),this.$emit("sendEleName",e)},closeItem:function(){window.location.href="about:blank",window.close()},startingMission:function(){var e=this;this.$confirm("是否开始任务？","提示",{confirmButtonText:"开始",cancelButtonText:"取消",type:"info"},"info").then((function(){e.addCommand({cmdId:1280,cmdContent:0}),e.$message({type:"success",message:"任务开始指令已发送"})})).catch((function(){}))},cancelMission:function(){var e=this;this.$confirm("是否取消当前任务？","提示",{confirmButtonText:"确定",cancelButtonText:"关闭",type:"warning"}).then((function(){e.addCommand({cmdId:1360,cmdContent:0}),e.$message({type:"success",message:"任务取消指令已发送"})})).catch((function(){}))},createMission:function(){this.dialogVisible=!0},handleClose:function(){this.dialogVisible=!1},createMissionDialogBtn:function(){var e=this,t=JSON.parse(JSON.stringify(this.dialogFrom));1==t.checkbox&&(t.settingTimes=-1),t.missionName?t.missionType?t.settingDeep?t.settingTimes||0!=t.checkbox?t.settingInterval?t.safeDepth?t.missionName.length>100?e.$message.error("任务名称过长"):t.settingDeep>10001||t.settingDeep<1?e.$message.error("设定深度格式错误请重新输入"):0==t.checkbox&&(t.settingTimes>10001||t.settingTimes<1)?e.$message.error("投放次数格式错误请重新输入"):t.settingInterval>301||t.settingInterval<1?e.$message.error("投放间隔格式错误请重新输入"):Number(t.safeDepth)>Number(t.settingDeep)?e.$message.error("距底安全深度格式错误请重新输入"):(t.safeDepth=Number(t.safeDepth),t.settingDeep=Number(t.settingDeep),t.settingInterval=Number(t.settingInterval),t.settingTimes=Number(t.settingTimes),console.log(t),this.addJob(t)):e.$message.error("请输入距底安全深度"):e.$message.error("请输入投放间隔"):e.$message.error("请设定投放次数"):e.$message.error("请输入设定深度"):e.$message.error("请选择工作模式"):e.$message.error("请输入任务名称")},isSettingTimes:function(){1==this.dialogFrom.checkbox?this.isMaxTimes=!0:this.isMaxTimes=!1},loopGetMission:function(){},addJob:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,a.next=3,h({url:"/job/add_job",method:"get",params:{jobName:e.missionName,jobMode:e.missionType,jobDeep:e.settingDeep,dropTimes:e.settingTimes,intervalTime:e.settingInterval,safeDeep:e.safeDepth,operateMode:0,operateSpeed:0}});case 3:s=a.sent;try{console.log(s.data),i.dialogFrom={missionName:"",missionType:5,settingDeep:"",settingTimes:"",settingInterval:"",safeDepth:"",checkbox:!1},i.isMaxTimes=!1,i.$message({message:"已添加任务",type:"success"}),t.dialogVisible=!1}catch(n){console.log(n),i.$message({message:n,type:"success"}),t.dialogVisible=!1}case 5:case"end":return a.stop()}}),a)})))()},getRealtimeJob:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,a.next=3,h({url:"/job/get_job_realdata",method:"get",params:{jobId:e}});case 3:s=a.sent;try{window.clearInterval(i.setinterval1),0!=s.data.length&&(i.form={missionName:s.data[0].jobName,missionType:s.data[0].jobMode,missionStatus:s.data[0].jobStatus,timesThrowSec:s.data[0].intervalTime,securityDeepMet:s.data[0].safeDeep,settingDepth:s.data[0].setDeep,settingThrowTimes:-1==s.data[0].dropTimes?"无限次":s.data[0].dropTimes,thisSettingThrowTimes:s.data[0].runTimes},s.data[0].jobStatus>=768?i.getCurrentJob():i.setinterval1=window.setInterval((function(){i.getRealtimeJob(i.realTimeJobId)}),1e3))}catch(n){console.log(n)}case 5:case"end":return a.stop()}}),a)})))()},getCurrentJob:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"/job/get_current_job",method:"get"});case 3:i=t.sent;try{window.clearInterval(a.setinterval),i.data.length>0?(a.form={missionName:i.data[0].jobName,missionType:i.data[0].jobMode,missionStatus:i.data[0].jobStatus,timesThrowSec:i.data[0].intervalTime,securityDeepMet:i.data[0].safeDeep,settingDepth:i.data[0].setDeep,settingThrowTimes:-1==i.data[0].dropTimes?"无限次":i.data[0].dropTimes,thisSettingThrowTimes:i.data[0].runTimes},a.realTimeJobId=i.data[0].jobId,a.getRealtimeJob(a.realTimeJobId)):a.setinterval=window.setInterval((function(){a.getCurrentJob()}),1e3)}catch(s){console.log(s)}case 5:case"end":return t.stop()}}),t)})))()},addCommand:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return t,a.next=3,h({url:"/sys-define/add_command",method:"get",params:{cmdId:e.cmdId,cmdContent:e.cmdContent}});case 3:i=a.sent;try{console.log(i.data)}catch(s){console.log(s)}case 5:case"end":return a.stop()}}),a)})))()},getRunningJob:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"/job/get_running_job",method:"get"});case 3:i=t.sent;try{a.runningJob=i.data,0==i.data.length?(a.hasRunningJob=!1,a.form.missionCode=1,0==a.waitingJob.length?(a.form={missionCode:"",missionType:"",missionStatus:"",timesThrowSec:"",securityDeepMet:"",settingDepth:"",settingThrowTimes:"",thisSettingThrowTimes:""},a.realTimeJobId=""):(a.form={missionCode:1,missionType:a.waitingJob[0].jobMode,missionStatus:a.waitingJob[0].jobStatus,timesThrowSec:a.waitingJob[0].dropTimes,securityDeepMet:a.waitingJob[0].safeDeep,settingDepth:a.waitingJob[0].setDeep,settingThrowTimes:a.waitingJob[0].dropTimes,thisSettingThrowTimes:a.waitingJob[0].runTimes},a.realTimeJobId=a.waitingJob[0].jobId)):(a.hasRunningJob=!0,0==a.options.length&&a.options.unshift({value:0,label:i.data[0].jobName,info:i.data[0]}),a.form={missionCode:0,missionType:a.options[0].info.jobMode,missionStatus:a.options[0].info.jobStatus,timesThrowSec:a.options[0].info.dropTimes,securityDeepMet:a.options[0].info.safeDeep,settingDepth:a.options[0].info.setDeep,settingThrowTimes:a.options[0].info.dropTimes,thisSettingThrowTimes:a.options[0].info.runTimes},a.realTimeJobId=a.options[0].info.jobId)}catch(s){console.log(s)}case 5:case"end":return t.stop()}}),t)})))()},getWaitingJob:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"/job/get_waiting_job",method:"get"});case 3:i=t.sent;try{for(s in a.waitingJob=i.data,a.options.splice(1),i.data)a.options.push({value:a.options.length+1,label:i.data[s].jobName,info:i.data[s]})}catch(n){console.log(n)}case 5:case"end":return t.stop()}}),t)})))()},getJobRealdata:function(e){return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,h({url:"/job/get_job_realdata",method:"get",params:{jobId:e.jobId}});case 2:a=t.sent;try{console.log(a.data)}catch(i){console.log(i)}case 4:case"end":return t.stop()}}),t)})))()},selectMission:function(){for(var e in this.options)this.form.missionCode==this.options[e].value&&(this.form={missionCode:this.form.missionCode,missionType:this.options[e].info.jobMode,missionStatus:this.options[e].info.jobStatus,timesThrowSec:this.options[e].info.dropTimes,securityDeepMet:this.options[e].info.safeDeep,settingDepth:this.options[e].info.setDeep,settingThrowTimes:this.options[e].info.dropTimes,thisSettingThrowTimes:this.options[e].info.runTimes},this.realTimeJobId=this.options[e].info.jobId)}}}),x=w,C=(a("ab6c"),Object(g["a"])(x,v,b,!1,null,"8bd71190",null)),T=C.exports,A=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{attrs:{id:"apparatus"}},[a("p",{staticClass:"page-title"},[a("span",{directives:[{name:"show",rawName:"v-show",value:1==e.pageSize,expression:"pageSize == true"}],staticStyle:{display:"inline-block","margin-left":"20px"}},[e._l(e.legendArray,(function(t,i){return a("span",{key:i,staticClass:"legend-item"},[a("span",{staticClass:"legend-point",style:{background:t.color},on:{click:function(a){return e.showLine(t.id)}}},[a("span",{staticClass:"legend-point-line",style:{background:t.color}})]),a("span",{staticClass:"legend-title",on:{click:function(a){return e.showYAxisAndWeightLine(t)}}},[e._v(e._s(t.name))])])})),a("el-button",{attrs:{size:"mini"},on:{click:e.resetEcharts}},[e._v("重置视图")])],2),a("span",{staticClass:"close-btn",staticStyle:{right:"20px"},attrs:{title:"放大/缩小"},on:{click:function(t){return e.handleSize("apparatus")}}},[a("i",{class:e.iconName})]),a("span",{staticClass:"close-btn",on:{click:function(t){return e.closeItem("apparatus")}}},[a("i",{staticClass:"el-icon-circle-close"})])]),a("div",{staticClass:"apparatus-content"},[a("div",{directives:[{name:"show",rawName:"v-show",value:1==e.pageSize,expression:"pageSize == true"}],staticClass:"bigScreen"},[a("div",{style:{width:"85%",height:"500px"},attrs:{id:"myChart"}}),a("div",{staticClass:"apparatus-from-content"},[a("div",{staticClass:"apparatus-from-content-1"},[a("div",{staticClass:"top-input"},[a("div",{staticClass:"form-label-top"},[a("p",[e._v("数据时间")]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e.form.getDataTime)+" ")])])]),a("div",{staticClass:"from-content"},e._l(e.formArray,(function(t,i){return a("div",{key:i,staticClass:"form-label",attrs:{label:t.dataName+"("+t.dataUnit+")"}},[a("p",[e._v(e._s(t.dataName)+" "),null!=t.dataUnit?a("span",[e._v("("+e._s(t.dataUnit)+")")]):e._e()]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e._f("formatterDecimals")(t.vals))+" ")])])})),0)])])]),a("div",{directives:[{name:"show",rawName:"v-show",value:0==e.pageSize,expression:"pageSize == false"}],staticClass:"smellScreen"},[a("div",{staticClass:"top-input-1"},[a("div",{staticClass:"form-label"},[a("p",[e._v("数据时间")]),a("span",{staticClass:"form-label-res",staticStyle:{"max-width":"200px"}},[e._v(" "+e._s(e.form.getDataTime)+" ")])])]),a("div",{staticClass:"grid-content"},[a("div",{staticStyle:{width:"100%",height:"84px"}}),e._l(e.formArray,(function(t,i){return a("div",{key:i,staticClass:"form-label",attrs:{label:t.dataName+"("+t.dataUnit+")"}},[a("p",[e._v(e._s(t.dataName)+" "),null!=t.dataUnit?a("span",[e._v("("+e._s(t.dataUnit)+")")]):e._e()]),a("span",{staticClass:"form-label-res"},[e._v(" "+e._s(e._f("formatterDecimals")(t.vals))+" ")])])}))],2)])])])},S=[],_={name:"apparatus",data:function(){return{setInterval:null,thisTimes:"",limit:1,iconName:"el-icon-right",colorArray:["#0000FF","#DC143C","#800080","#5F9EA0","#FF8C00","#48D1CC","#696969","#006400","#8B4513","#FFD700"],legendArray:[],form:{getDataTime:"0"},myChart:"",option:{title:{text:""},grid:{left:"5%",right:"2%",bottom:"5%",containLabel:!1},tooltip:{trigger:"axis"},color:["#0000FF","#DC143C","#800080","#5F9EA0","#FF8C00","#48D1CC","#696969","#006400","#8B4513","#FFD700"],dataZoom:[{type:"inside"}],xAxis:{type:"category",boundaryGap:!1,data:[],axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!1},axisLabel:{show:!1}},yAxis:[],series:[]},globelNum:0,formArray:[],chartsArray:[],isEnter:!1,echartsDataZoom:50}},beforeMount:function(){},mounted:function(){this.getishow(),document.getElementsByClassName("apparatus-from-content")[0].style.height=document.getElementById("apparatus").clientHeight-50+"px",document.getElementsByClassName("grid-content")[0].style.height=document.getElementById("apparatus").clientHeight-50+"px",document.getElementById("myChart").style.height=document.getElementById("apparatus").clientHeight-50+"px";var e=this;window.onresize=function(){e.myChart.resize()},this.getDataSec()},filters:{formatterDecimals:function(e){return null==e||0==e?0:"string"==typeof e?e:e.toFixed(4)}},props:{pageSize:Boolean},watch:{pageSize:function(e,t){this.iconName=0==e?"el-icon-back":"el-icon-right"}},methods:{changeEchartsDataZoom:function(e){1==e?this.echartsDataZoom+=50:this.echartsDataZoom-=50,console.log(this.echartsDataZoom)},resetEcharts:function(){var e=this,t=e.myChart.getOption();for(var a in t.yAxis)t.yAxis[a].show=!1;for(var i in t.series)t.series[i].lineStyle.width=2;t.yAxis[0].show=!0,e.myChart.setOption(t)},showYAxisAndWeightLine:function(e){var t=this,a=t.myChart.getOption();for(var i in a.yAxis)if(a.yAxis[i].show=!1,a.yAxis[i].id==e.id)if(null==e.sameAs)a.yAxis[i].show=!0,a.series[i].lineStyle.width=4;else for(var s in a.yAxis)a.yAxis[s].id==e.sameAs&&(a.yAxis[s].show=!0,a.series[i].lineStyle.width=4);t.myChart.setOption(a)},showLine:function(e){var t=this,a=t.myChart.getOption();for(var i in a.yAxis)a.series[i].id==e&&(0==a.series[i].lineStyle.width?a.series[i].lineStyle.width=2:a.series[i].lineStyle.width=0);t.myChart.setOption(a)},getDataSec:function(){var e=this;window.clearInterval(e.setInterval),e.setInterval=setInterval((function(){e.getApparatusData({thisTimes:e.thisTimes,limit:e.limit})}),1e3)},closeItem:function(e){this.$emit("sendEleName",e)},handleSize:function(e){1==this.pageSize?this.pageSize=!1:this.pageSize=!0,this.$emit("contrlEleName",{ele:e,switch:this.pageSize})},renderEcharts:function(e,t){var a=this;if(a.myChart){var i=a.myChart.getOption(),s=e.data;for(var n in s.length>1&&s.reverse(),s){if(1==t)for(var r=0;r<a.echartsDataZoom;r++)i.xAxis[0].data.push(a.formatterTimes(s[n].timeTag,r));-1==i.xAxis[0].data.indexOf(s[n].timeTag)&&i.xAxis[0].data.push(s[n].timeTag);var o=s[n],l=i.series;for(var c in l)for(var m in o)l[c].labelName==m&&l[c].data.push(o[m]);i.xAxis[0].data.length>a.echartsDataZoom&&i.xAxis[0].data.splice(0,i.xAxis[0].data.length-a.echartsDataZoom);for(var d=0;d<i.series.length;d++)i.series[d].data.length>a.echartsDataZoom&&i.series[d].data.splice(0,i.series[d].data.length-a.echartsDataZoom)}a.myChart.setOption(i)}},getApparatusData:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,n,r,o,l,c,m;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,a.next=3,h({url:"realtime",method:"get",params:{start_time:e.thisTimes,limit:e.limit}});case 3:s=a.sent;try{if(s.data.length>0){for(r in n=JSON.parse(JSON.stringify(s)),n.data)for(o in n.data[r])"number"==typeof n.data[r][o]&&(n.data[r][o]=null==n.data[r][o]?0:n.data[r][o].toFixed(2));for(c in 0==i.globelNum?i.renderEcharts(n,!0):i.renderEcharts(n,!1),i.globelNum+=1,i.form={getDataTime:s.data[0].timeTag},i.thisTimes=s.data[0].timeTag,l=s.data[0],i.formArray)for(m in l)i.formArray[c].fieldName==m&&(i.formArray[c].vals=l[m])}}catch(d){console.log(d)}case 5:case"end":return a.stop()}}),a)})))()},formatterTimes:function(e,t){var a=e;a=a.substring(0,19),a=a.replace(/-/g,"/");var i=new Date(a).getTime();i=0==t?i:i+=1e3*t;var s=new Date(i),n=s.getFullYear()+"-"+(s.getMonth()+1<10?"0"+(s.getMonth()+1):s.getMonth()+1)+"-"+(s.getDate()<10?"0"+s.getDate():s.getDate())+" "+(s.getHours()<10?"0"+s.getHours():s.getHours())+":"+(s.getMinutes()<10?"0"+s.getMinutes():s.getMinutes())+":"+(s.getSeconds()<10?"0"+s.getSeconds():s.getSeconds());return n},drawLine:function(){var e=this,t=this;this.myChart=this.$echarts.init(document.getElementById("myChart")),this.myChart.getZr().on("mousemove",(function(a){var i=[a.offsetX,a.offsetY];if(e.myChart.containPixel("grid",i)){if(1==t.isEnter)return;t.isEnter=!0,window.clearInterval(t.setInterval)}})),this.myChart.getZr().on("mouseout",(function(e){t.isEnter=!1,window.clearInterval(t.setInterval),t.setInterval=setInterval((function(){t.getApparatusData({thisTimes:t.thisTimes,limit:""})}),1e3)})),this.myChart.setOption(this.option,!0);var i=a("eec4"),s=i(),n=document.getElementById("apparatus");s.listenTo(n,(function(e){t.$nextTick((function(){document.getElementById("myChart").style.width=e.offsetWidth+"px",t.myChart.resize()}))}));var r=document.getElementsByClassName("apparatus-content")[0];s.listenTo(r,(function(e){t.$nextTick((function(){document.getElementsByClassName("apparatus-from-content")[0].style.height=e.clientHeight+"px",document.getElementsByClassName("grid-content")[0].style.height=e.clientHeight+"px",document.getElementById("myChart").style.height=e.clientHeight+"px",document.getElementById("myChart").style.width=e.offsetWidth+"px",t.myChart.resize()}))}))},getishow:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a,i,s,n,r,o,l,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return a=e,t.next=3,h({url:"sys-define/get_ishow_define",method:"get"});case 3:i=t.sent;try{if(console.log(i.data),a.formArray=JSON.parse(JSON.stringify(i.data)),a.formArray.length>0){for(s in a.formArray)1==a.formArray[s].showInChart&&a.chartsArray.push(a.formArray[s]);for(n in a.chartsArray)a.option.series.push({id:a.chartsArray[n].serialNo,name:a.chartsArray[n].dataName,type:"line",yAxisIndex:n,symbol:"none",smooth:!0,data:[],labelName:a.chartsArray[n].fieldName,sameAs:a.chartsArray[n].sameAs}),a.option.yAxis.push({id:a.chartsArray[n].serialNo,name:a.chartsArray[n].dataName,position:"left",type:"value",show:0==n,inverse:1==a.chartsArray[n].topLeft,axisLine:{show:!0},axisTick:{show:!1},splitLine:{show:!0},nameLocation:1==a.chartsArray[n].topLeft?"start":"end",min:null==a.chartsArray[n].lowerLimit?"dataMin":a.chartsArray[n].lowerLimit,max:null==a.chartsArray[n].upperLimit?"dataMax":a.chartsArray[n].upperLimit}),a.legendArray.push({color:"",name:a.chartsArray[n].dataName+"("+a.chartsArray[n].dataUnit+")",id:a.chartsArray[n].serialNo,sameAs:a.chartsArray[n].sameAs});for(r in a.option.yAxis)for(o in a.option.series)a.option.series[o].sameAs==a.option.yAxis[r].id&&(a.option.series[o].yAxisIndex=r);for(l in a.colorArray)for(c in a.legendArray)a.legendArray[c].color=a.colorArray[c];a.drawLine()}}catch(m){console.log(m)}case 5:case"end":return t.stop()}}),t)})))()}}},N=_,D=(a("377a"),Object(g["a"])(N,A,S,!1,null,"638cb319",null)),k=D.exports,I={name:"App",data:function(){return{alertArray:[],ele:[],drawer:!1,pageSize:!0,form:{fileLocation:"D:/data/user",realertInformationion:""},timeInterval:"",thistime:""}},mounted:function(){this.getAlert(),window.setInterval((function(){window.location.reload()}),36e5)},components:{Winch:y,Mission:T,Apparatus:k},methods:{getAlert:function(){var e=this;this.timeInterval=window.setInterval((function(t){e.getAlarmRealtime({time:e.thistime,limit:1})}),1e3)},getContrlEle:function(e){this.pageSize=e.switch,1==e.switch?(document.getElementById("winch").style.width="300px",document.getElementById("apparatus").style.width="100%"):(document.getElementById("winch").style.width="100%",document.getElementById("apparatus").style.width="300px")},checkEleArr:function(e){return-1!=this.ele.indexOf(e)},showDrawer:function(){this.drawer=!0},getMsg:function(e){if(console.log(e),-1==this.ele.indexOf(e))this.ele.push(e);else for(var t in this.ele)this.ele[t]==e&&this.ele.splice(t,1);"mission"==e?document.getElementById("mission").clientHeight<100?document.getElementsByClassName("btm-content")[0].style.height="77%":document.getElementsByClassName("btm-content")[0].style.height=document.body.clientHeight-100+"px":(document.getElementById(e).style.display="none","apparatus"==e&&(document.getElementById("winch").style.marginRight=0),"none"==document.getElementById("winch").style.display&&"none"==document.getElementById("apparatus").style.display?document.getElementsByClassName("btm-content")[0].style.height="77%":"none"==document.getElementById("winch").style.display&&"none"==document.getElementById("apparatus").style.display&&document.getElementById("mission").clientHeight<100?document.getElementsByClassName("btm-content")[0].style.height=document.body.clientHeight-82+"px":document.getElementsByClassName("btm-content")[0].style.height="77%")},showContent:function(e){for(var t in console.log(e),document.getElementById(e).style.display="block","apparatus"==e&&(document.getElementById("winch").style.marginRight="8px"),"mission"==e&&(document.getElementsByClassName("btm-content")[0].style.height="77%",document.getElementById("winch").style.borderTopLeftRadius="0px",document.getElementById("apparatus").style.borderTopRightRadius="0px"),this.ele)this.ele[t]==e&&this.ele.splice(t,1);this.ele.length<2&&(document.getElementById("apparatus").style.borderTopLeftRadius="0px",document.getElementById("apparatus").style.borderTopRightRadius="0px")},exportData:function(){var e=this;return Object(r["a"])(regeneratorRuntime.mark((function t(){var a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return e,t.next=3,h({url:"/job/export_data",method:"get"});case 3:a=t.sent;try{console.log(a)}catch(i){console.log(i)}case 5:case"end":return t.stop()}}),t)})))()},getAlarmRealtime:function(e){var t=this;return Object(r["a"])(regeneratorRuntime.mark((function a(){var i,s,n;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return i=t,a.next=3,h({url:"/sys-define/get_alarm_realtime",method:"get",params:{start_time:e.time,limit:e.limit}});case 3:s=a.sent;try{if(s.data.length>0){for(n in s.data)i.alertArray.unshift(s.data[n]);i.thistime=s.data[0].timeTag}}catch(r){console.log(r)}case 5:case"end":return a.stop()}}),a)})))()}}},E=I,B=(a("034f"),Object(g["a"])(E,s,n,!1,null,null,null)),O=B.exports,j=a("5c96"),M=a.n(j),F=(a("0fae"),a("313e")),L=a.n(F),R=a("77ed"),$=a.n(R),J=a("3835"),z=a("2f62");i["default"].use(z["a"]);var H=new z["a"].Store({state:{pageSizeBigOne:!0},mutations:{update:function(e,t){var a=Object(J["a"])(t,2),i=a[0],s=a[1];e[i]=s}}}),Z=H;i["default"].config.productionTip=!1,i["default"].prototype.$store=Z,i["default"].prototype.$echarts=L.a,i["default"].use(M.a),i["default"].use($.a),new i["default"]({store:Z,render:function(e){return e(O)}}).$mount("#app"),i["default"].config.silent=!0},"85ec":function(e,t,a){},"957e":function(e,t,a){},ab11:function(e,t,a){},ab6c:function(e,t,a){"use strict";var i=a("c564"),s=a.n(i);s.a},c564:function(e,t,a){},f8dd:function(e,t,a){"use strict";var i=a("957e"),s=a.n(i);s.a}});
//# sourceMappingURL=app.abdccfd0.js.map